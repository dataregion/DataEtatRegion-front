run-tests-e2e:
  stage: üß™ post-deploy tests
  image: mcr.microsoft.com/playwright:v1.50.1-noble@sha256:ac7053180325ef75d31774c458d0bb9b55ac153ae1be3d104b80c6c1bb6a067c
  script:
    - cd e2e/
    - npm ci
    - export TEST_USERNAME=${TEST_USERNAME}
    - export TEST_PASSWORD=${TEST_PASSWORD}
    - export TEST_USERNAME_ADMIN=${TEST_USERNAME_ADMIN}
    - export TEST_PASSWORD_ADMIN=${TEST_PASSWORD_ADMIN}
    - npx playwright test
  artifacts:
    expire_in: 3 days
    when: always
    paths:
      - e2e/playwright-report/*
      - e2e/test-results/*
      - test-results/*
      - playwright-report/*
  needs:
    - job: "üê£ deploy fronts on integration"
  rules:
    - if: '$DO_INTEG_TESTS == "‚úÖ"'
    - when: manual