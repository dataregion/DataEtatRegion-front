include:
  - component: $CI_SERVER_FQDN/csm/gitlab-components/docker-build@5.0.5
    inputs:
      image-name: nocode/france-relance
      image-tag: ${FRONTS_VER}
      build-context: ./
      dockerfile-name: ./apps/france-relance/Dockerfile
      do-login: true
      registry: ${REGISTRY}
      registry-login: ${REGISTRY_USER}
      do-push: true
      # enable-debug: true

  - component: $CI_SERVER_FQDN/csm/gitlab-components/docker-build@5.0.5
    inputs:
      image-name: nocode/data-qpv
      image-tag: ${FRONTS_VER}
      build-context: ./
      dockerfile-name: ./apps/data-qpv/Dockerfile
      do-login: true
      registry: ${REGISTRY}
      registry-login: ${REGISTRY_USER}
      do-push: true
      # enable-debug: true

  - component: $CI_SERVER_FQDN/csm/gitlab-components/docker-build@5.0.5
    inputs:
      image-name: nocode/budget-dataetat
      image-tag: ${FRONTS_VER}
      build-context: ./
      dockerfile-name: ./apps/budget-dataetat/Dockerfile
      do-login: true
      registry: ${REGISTRY}
      registry-login: ${REGISTRY_USER}
      do-push: true
      # enable-debug: true
  - component: $CI_SERVER_FQDN/csm/gitlab-components/docker-build@5.0.5
    inputs:
      image-name: nocode/budget-dataetat-dev
      image-tag: ${FRONTS_VER}
      build-context: ./
      dockerfile-name: ./apps/budget-dataetat/Dockerfile.dev
      do-login: true
      registry: ${REGISTRY}
      registry-login: ${REGISTRY_USER}
      do-push: true
      # enable-debug: true

.default-dockerize: &default-dockerize
  rules:
    - if: '$DO_DOCKERIZE == "‚úÖ"'
    - if: '$DO_DOCKERIZE == "‚öôÔ∏è"'
      when: manual
    - when: never

"üê≥ dockerizing budget-dataetat-dev":
  <<: *default-dockerize
  extends: ".dockerize-nocode/budget-dataetat-dev"
  stage: üê≥ dockerize
  needs:
    - job: "üî® build angular apps"

"üê≥ dockerizing budget-dataetat":
  <<: *default-dockerize
  extends: ".dockerize-nocode/budget-dataetat"
  stage: üê≥ dockerize
  needs:
    - job: "üî® build angular apps"


"üê≥ dockerizing france-relance":
  <<: *default-dockerize
  extends: ".dockerize-nocode/france-relance"
  stage: üê≥ dockerize
  needs:
    - job: "üî® build angular apps"

"üê≥ dockerizing data-qpv":
  <<: *default-dockerize
  extends: ".dockerize-nocode/data-qpv"
  stage: üê≥ dockerize
  needs:
    - job: "üî® build angular apps"